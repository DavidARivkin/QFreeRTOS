<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>QFreeRTOS: source/portable/BCC/16BitDOS/common/portasm.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QFreeRTOS
   &#160;<span id="projectnumber">0.0.1</span>
   </div>
   <div id="projectbrief">Qt port of FreeRTOS (Simulation)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">portasm.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aaea6ce0c286cb419f68cce25598762ea"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#aaea6ce0c286cb419f68cce25598762ea">portSWITCH_CONTEXT</a>()</td></tr>
<tr class="separator:aaea6ce0c286cb419f68cce25598762ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77d89f631d90f682ac62e4f846a3a9cc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#a77d89f631d90f682ac62e4f846a3a9cc">portFIRST_CONTEXT</a>()</td></tr>
<tr class="separator:a77d89f631d90f682ac62e4f846a3a9cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:af5b0f7452857787ed70ce2856ca74c4b"><td class="memItemLeft" align="right" valign="top">typedef <a class="el" href="_paradigm_2_tern___e_e_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#af5b0f7452857787ed70ce2856ca74c4b">TCB_t</a></td></tr>
<tr class="separator:af5b0f7452857787ed70ce2856ca74c4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9c86137bc3c1cbffc39fff22627cb885"><td class="memItemLeft" align="right" valign="top"><a class="el" href="_paradigm_2_tern___e_e_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#a9c86137bc3c1cbffc39fff22627cb885">vTaskSwitchContext</a> (<a class="el" href="_paradigm_2_tern___e_e_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>)</td></tr>
<tr class="separator:a9c86137bc3c1cbffc39fff22627cb885"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a7cd782382601a8809780a8b6e8ffe570"><td class="memItemLeft" align="right" valign="top">volatile <a class="el" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#af5b0f7452857787ed70ce2856ca74c4b">TCB_t</a> *volatile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#a7cd782382601a8809780a8b6e8ffe570">pxCurrentTCB</a></td></tr>
<tr class="separator:a7cd782382601a8809780a8b6e8ffe570"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a77d89f631d90f682ac62e4f846a3a9cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_paradigm_2_tern___e_e_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a> portFIRST_CONTEXT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">__asm { mov ax, seg <a class="code" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#a7cd782382601a8809780a8b6e8ffe570">pxCurrentTCB</a>        }   \</div>
<div class="line">                            __asm { mov ds, ax                      }   \</div>
<div class="line">                            __asm { les bx, dword ptr <a class="code" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#a7cd782382601a8809780a8b6e8ffe570">pxCurrentTCB</a>  }   \</div>
<div class="line">                            __asm { mov ss, es:[ bx + 2 ]           }   \</div>
<div class="line">                            __asm { mov <a class="code" href="_g_c_c_2_r_l78_2_i_s_r___support_8h.html#a78954c18cde9882760485d3420c872db">sp</a>, es:[ bx ]               }   \</div>
<div class="line">                            __asm { pop bp                          }   \</div>
<div class="line">                            __asm { pop di                          }   \</div>
<div class="line">                            __asm { pop si                          }   \</div>
<div class="line">                            __asm { pop ds                          }   \</div>
<div class="line">                            __asm { pop es                          }   \</div>
<div class="line">                            __asm { pop dx                          }   \</div>
<div class="line">                            __asm { pop cx                          }   \</div>
<div class="line">                            __asm { pop bx                          }   \</div>
<div class="line">                            __asm { pop ax                          }   \</div>
<div class="line">                            __asm { iret                            }</div>
<div class="ttc" id="_b_c_c_216_bit_d_o_s_2common_2portasm_8h_html_a7cd782382601a8809780a8b6e8ffe570"><div class="ttname"><a href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#a7cd782382601a8809780a8b6e8ffe570">pxCurrentTCB</a></div><div class="ttdeci">volatile TCB_t *volatile pxCurrentTCB</div><div class="ttdef"><b>Definition:</b> <a href="_i_a_r_278_k0_r_2_i_s_r___support_8h_source.html#l00094">ISR_Support.h:94</a></div></div>
<div class="ttc" id="_g_c_c_2_r_l78_2_i_s_r___support_8h_html_a78954c18cde9882760485d3420c872db"><div class="ttname"><a href="_g_c_c_2_r_l78_2_i_s_r___support_8h.html#a78954c18cde9882760485d3420c872db">sp</a></div><div class="ttdeci">_pxCurrentTCB _usCriticalNesting macro portSAVE_CONTEXT SEL RB0 PUSH AX PUSH HL MOV CS XCH X MOV ES PUSH AX PUSH DE PUSH BC SEL RB1 PUSH AX PUSH BC PUSH DE PUSH HL SEL RB2 PUSH AX PUSH BC PUSH DE PUSH HL SEL RB0 MOVW!_usCriticalNesting PUSH AX MOVW!_pxCurrentTCB MOVW AX MOVW SP AX movw sp</div><div class="ttdef"><b>Definition:</b> <a href="_i_a_r_2_v850_e_s_2_i_s_r___support_8h_source.html#l00106">ISR_Support.h:106</a></div></div>
</div><!-- fragment -->
<p>Definition at line <a class="el" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h_source.html#l00110">110</a> of file <a class="el" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h_source.html">portasm.h</a>.</p>

</div>
</div>
<a class="anchor" id="aaea6ce0c286cb419f68cce25598762ea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_paradigm_2_tern___e_e_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a> portSWITCH_CONTEXT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keyword">asm</span> { mov   ax, seg <a class="code" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#a7cd782382601a8809780a8b6e8ffe570">pxCurrentTCB</a>        }   \</div>
<div class="line">                            asm { mov   ds, ax                      }   \</div>
<div class="line">                            asm { les   bx, <a class="code" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#a7cd782382601a8809780a8b6e8ffe570">pxCurrentTCB</a>            }   <span class="comment">/* Save the stack pointer into the TCB. */</span>      \</div>
<div class="line">                            asm { mov   es:0x2[ bx ], ss            }   \</div>
<div class="line">                            asm { mov   es:[ bx ], <a class="code" href="_g_c_c_2_r_l78_2_i_s_r___support_8h.html#a78954c18cde9882760485d3420c872db">sp</a>               }   \</div>
<div class="line">                            asm { <a class="code" href="_c_c_s_2_m_s_p430_x_2data__model_8h.html#a869a0a2c43d256ec1a6346c64bfca0ad">call</a>  far ptr <a class="code" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#a9c86137bc3c1cbffc39fff22627cb885">vTaskSwitchContext</a>  }   <span class="comment">/* Perform the switch. */</span>                       \</div>
<div class="line">                            asm { mov   ax, seg <a class="code" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#a7cd782382601a8809780a8b6e8ffe570">pxCurrentTCB</a>        }   <span class="comment">/* Restore the stack pointer from the TCB. */</span>   \</div>
<div class="line">                            asm { mov   ds, ax                      }   \</div>
<div class="line">                            asm { les   bx, dword ptr <a class="code" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#a7cd782382601a8809780a8b6e8ffe570">pxCurrentTCB</a>  }   \</div>
<div class="line">                            asm { mov   ss, es:[ bx + 2 ]           }   \</div>
<div class="line">                            asm { mov   <a class="code" href="_g_c_c_2_r_l78_2_i_s_r___support_8h.html#a78954c18cde9882760485d3420c872db">sp</a>, es:[ bx ]               }</div>
<div class="ttc" id="_b_c_c_216_bit_d_o_s_2common_2portasm_8h_html_a9c86137bc3c1cbffc39fff22627cb885"><div class="ttname"><a href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#a9c86137bc3c1cbffc39fff22627cb885">vTaskSwitchContext</a></div><div class="ttdeci">void vTaskSwitchContext(void)</div><div class="ttdef"><b>Definition:</b> <a href="tasks_8c_source.html#l02203">tasks.c:2203</a></div></div>
<div class="ttc" id="_b_c_c_216_bit_d_o_s_2common_2portasm_8h_html_a7cd782382601a8809780a8b6e8ffe570"><div class="ttname"><a href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#a7cd782382601a8809780a8b6e8ffe570">pxCurrentTCB</a></div><div class="ttdeci">volatile TCB_t *volatile pxCurrentTCB</div><div class="ttdef"><b>Definition:</b> <a href="_i_a_r_278_k0_r_2_i_s_r___support_8h_source.html#l00094">ISR_Support.h:94</a></div></div>
<div class="ttc" id="_c_c_s_2_m_s_p430_x_2data__model_8h_html_a869a0a2c43d256ec1a6346c64bfca0ad"><div class="ttname"><a href="_c_c_s_2_m_s_p430_x_2data__model_8h.html#a869a0a2c43d256ec1a6346c64bfca0ad">call</a></div><div class="ttdeci">if pushm_x define popm popm_x define push push_x define pop pop_x define mov mov_x else define pushm pushm_x define popm popm_x define push push_x define pop pop_x define mov mov_x endif if call_x define ret_x else define call</div><div class="ttdef"><b>Definition:</b> <a href="_c_c_s_2_m_s_p430_x_2data__model_8h_source.html#l00071">data_model.h:71</a></div></div>
<div class="ttc" id="_g_c_c_2_r_l78_2_i_s_r___support_8h_html_a78954c18cde9882760485d3420c872db"><div class="ttname"><a href="_g_c_c_2_r_l78_2_i_s_r___support_8h.html#a78954c18cde9882760485d3420c872db">sp</a></div><div class="ttdeci">_pxCurrentTCB _usCriticalNesting macro portSAVE_CONTEXT SEL RB0 PUSH AX PUSH HL MOV CS XCH X MOV ES PUSH AX PUSH DE PUSH BC SEL RB1 PUSH AX PUSH BC PUSH DE PUSH HL SEL RB2 PUSH AX PUSH BC PUSH DE PUSH HL SEL RB0 MOVW!_usCriticalNesting PUSH AX MOVW!_pxCurrentTCB MOVW AX MOVW SP AX movw sp</div><div class="ttdef"><b>Definition:</b> <a href="_i_a_r_2_v850_e_s_2_i_s_r___support_8h_source.html#l00106">ISR_Support.h:106</a></div></div>
</div><!-- fragment -->
<p>Definition at line <a class="el" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h_source.html#l00097">97</a> of file <a class="el" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h_source.html">portasm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="af5b0f7452857787ed70ce2856ca74c4b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef <a class="el" href="_paradigm_2_tern___e_e_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a> <a class="el" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html#af5b0f7452857787ed70ce2856ca74c4b">TCB_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h_source.html#l00073">73</a> of file <a class="el" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h_source.html">portasm.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a9c86137bc3c1cbffc39fff22627cb885"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_paradigm_2_tern___e_e_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a> vTaskSwitchContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="_paradigm_2_tern___e_e_2small_2portmacro_8h.html#a14d32f8130d3c0b212cfc751730b5b49">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="tasks_8c_source.html#l02203">2203</a> of file <a class="el" href="tasks_8c_source.html">tasks.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a7cd782382601a8809780a8b6e8ffe570"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="_i_a_r_2_v850_e_s_2portmacro_8h.html#a716d176e9130fa97ac875a31e7453605">portRESTORE_CONTEXT</a> <a class="el" href="_i_a_r_2_s_t_r91x_2_i_s_r___support_8h.html#ada307cac855884c6cb4493eaa3663de7">MACRO</a> <a class="el" href="_i_a_r_2_r_l78_2_i_s_r___support_8h.html#a1281d798a6a374bdcb81e5641c27e744">MOVW</a> pxCurrentTCB</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_i_a_r_278_k0_r_2_i_s_r___support_8h_source.html#l00094">94</a> of file <a class="el" href="_i_a_r_278_k0_r_2_i_s_r___support_8h_source.html">ISR_Support.h</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_a3bc36d27ac900b14f04c9e2c43db8b5.html">portable</a></li><li class="navelem"><a class="el" href="dir_6afbb0004e1e7dc7fccb3a794160a878.html">BCC</a></li><li class="navelem"><a class="el" href="dir_9952c995516ffd23ee10b36060fe6ff1.html">16BitDOS</a></li><li class="navelem"><a class="el" href="dir_ae027ba62b1ad31c36a65d86370bdf58.html">common</a></li><li class="navelem"><a class="el" href="_b_c_c_216_bit_d_o_s_2common_2portasm_8h.html">portasm.h</a></li>
    <li class="footer">Generated on Thu Feb 4 2016 15:55:41 for QFreeRTOS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
